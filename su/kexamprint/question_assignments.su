--@depends:

-- Question Assignments - assigns questions from vg12526.tarama to student seats
--@TABLE
CREATE TABLE kexamprint.question_assignments (
    id SERIAL PRIMARY KEY,
    placement_id INTEGER NOT NULL,
    student_id INTEGER NOT NULL,
    room_code VARCHAR(50) NOT NULL,
    exam_code VARCHAR(50) NOT NULL,
    curriculum_language VARCHAR(10) NOT NULL,
    tarama_question_id TEXT NOT NULL,
    session_key TEXT NOT NULL,
    assigned_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT uq_student_question UNIQUE (placement_id, student_id)
);
--@END

--@INDEX
CREATE INDEX idx_question_assign_placement ON kexamprint.question_assignments(placement_id);
--@END

--@INDEX
CREATE INDEX idx_question_assign_student ON kexamprint.question_assignments(student_id);
--@END

--@INDEX
CREATE INDEX idx_question_assign_session ON kexamprint.question_assignments(session_key);
--@END

--@INDEX
CREATE INDEX idx_question_assign_tarama ON kexamprint.question_assignments(tarama_question_id);
--@END
